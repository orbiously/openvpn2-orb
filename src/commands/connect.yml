description: >
  This command starts the OpenVPN 2 client and initiates the the connection.

parameters:
  debug:
    type: boolean
    default: true
  timeout:
    type: integer
    default: 10
killswitch:
    type: boolean
    default: on

steps:
  - run:
      shell: bash
      name: Connecting to OpenVPN server
      command: <<include(scripts/connect.sh)>>
      environment:
        DEBUG: << parameters.debug >>

  - run:
      name: Waiting for VPN connection to be established
      shell: bash
      environment:
        TIMEOUT: << parameters.timeout >>
        KILLSWITCH: << parameters.killswitch >>
      command: <<include(scripts/wait.sh)>>
