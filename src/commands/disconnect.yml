description: >
  This command terminates the OpenVPN daemon/service, and thus disconnects the OpenVPN client.

parameters:
  store-log:
    type: boolean
    default: false

steps:
  - run:
      name: Disconnecting OpenVPN Client & Cleaning up
      shell: bash
      environment:
        DEBUG: << parameters.store-log >>
      command: <<include(scripts/disconnect.sh)>>

  - when:
      condition: << parameters.store-log >>
      steps:
        - store_artifacts:
            path: /tmp/openvpn.log
            destination: openvpn.log
